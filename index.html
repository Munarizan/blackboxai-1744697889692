<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sekolah Agama Rendah Rakyat Solathiah</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
        }

        /* Accessibility Improvements */
        :focus {
            outline: 3px solid #2563eb !important;
            outline-offset: 2px;
        }

        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: #2563eb;
            color: white;
            padding: 8px;
            z-index: 100;
            transition: top 0.3s;
        }

        .skip-link:focus {
            top: 0;
        }

        /* Form field styles */
        .form-field {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #374151;
        }

        .form-input {
            width: 100%;
            padding: 0.5rem;
            border: 2px solid #d1d5db;
            border-radius: 0.5rem;
            background-color: white;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        .form-input:focus {
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
        }

        .form-input.error {
            border-color: #dc2626;
            background-color: #fee2e2;
        }

        .error-message {
            color: #dc2626;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }

        /* Required field indicator */
        .required::after {
            content: "*";
            color: #dc2626;
            margin-left: 0.25rem;
        }

        /* Improved button styles */
        .submit-button {
            background-color: #2563eb;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: background-color 0.2s;
        }

        .submit-button:hover {
            background-color: #1d4ed8;
        }

        .submit-button:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.3);
        }

        /* Status messages */
        .status-message {
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
        }

        .status-message.success {
            background-color: #dcfce7;
            color: #166534;
            border: 1px solid #16a34a;
        }

        .status-message.error {
            background-color: #fee2e2;
            color: #991b1b;
            border: 1px solid #dc2626;
        }

        /* Improved dropdown styles */
        select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
        }

        /* High contrast mode support */
        @media (forced-colors: active) {
            .submit-button {
                border: 2px solid currentColor;
            }
            
            select, input {
                border: 2px solid currentColor;
            }
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Skip link -->
    <a href="#main-content" class="skip-link">
        Langkau ke kandungan utama
    </a>

    <!-- Header -->
    <header class="bg-white shadow-lg" role="banner">
        <div class="container mx-auto px-4 py-6">
            <div class="flex items-center justify-center flex-col md:flex-row md:justify-between">
                <div class="flex items-center mb-4 md:mb-0">
                    <div class="h-20 w-20 flex items-center justify-center bg-blue-600 text-white rounded-full mr-4" role="img" aria-label="Logo SRAR Solathiah">
                        <i class="fas fa-mosque text-4xl"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800">Sekolah Agama Rendah Rakyat Solathiah</h1>
                        <p class="text-sm text-gray-600">Persiaran Wira Jaya Barat 62, Taman Rapat Setia Baru, 31350 Ipoh, Perak</p>
                    </div>
                </div>
                <div id="current-time" class="text-lg font-semibold text-gray-700" role="timer" aria-live="polite"></div>
            </div>
        </div>
    </header>

    <!-- Main Navigation -->
    <nav class="bg-white shadow-sm mb-8" role="navigation" aria-label="Menu Utama">
        <div class="container mx-auto px-4 py-4">
            <ul class="flex flex-wrap gap-4 justify-center">
                <li>
                    <a href="#carta-organisasi" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                        Carta Organisasi
                    </a>
                </li>
                <li>
                    <a href="#maklumat-kelas" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                        Maklumat Kelas
                    </a>
                </li>
                <li>
                    <a href="#senarai-subjek" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                        Senarai Subjek
                    </a>
                </li>
                <li>
                    <a href="#jadual-pdp" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                        Jadual PDP
                    </a>
                </li>
                <li>
                    <a href="#guru-pengganti" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                        Guru Pengganti
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content" class="container mx-auto px-4 py-8">
        <!-- Previous sections remain unchanged -->

        <!-- Enhanced Guru Pengganti Section -->
        <section id="guru-pengganti" class="mb-12 bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-2xl font-bold mb-6 text-gray-800 border-b pb-2">Guru Pengganti</h2>
            
            <!-- Status message container -->
            <div id="status-message" role="status" aria-live="polite" class="hidden"></div>

            <form id="relief-form" class="space-y-6" novalidate>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Teacher Selection -->
                    <div class="form-field">
                        <label for="teacher" class="form-label required">
                            Guru
                            <span class="sr-only">diperlukan</span>
                        </label>
                        <select id="teacher" 
                                class="form-input"
                                required
                                aria-required="true"
                                aria-invalid="false"
                                aria-describedby="teacher-error">
                            <option value="">Sila Pilih Guru</option>
                            <option value="guru1">Guru 1</option>
                            <option value="guru2">Guru 2</option>
                            <option value="guru3">Guru 3</option>
                            <option value="guru4">Guru 4</option>
                            <option value="guru5">Guru 5</option>
                            <option value="guru6">Guru 6</option>
                            <option value="guru7">Guru 7</option>
                            <option value="guru8">Guru 8</option>
                            <option value="guru9">Guru 9</option>
                        </select>
                        <div id="teacher-error" class="error-message" role="alert"></div>
                    </div>

                    <!-- Class Selection -->
                    <div class="form-field">
                        <label for="class" class="form-label required">
                            Kelas
                            <span class="sr-only">diperlukan</span>
                        </label>
                        <select id="class" 
                                class="form-input"
                                required
                                aria-required="true"
                                aria-invalid="false"
                                aria-describedby="class-error">
                            <option value="">Sila Pilih Kelas</option>
                            <optgroup label="Tahun 1">
                                <option value="1A">1A</option>
                                <option value="1B">1B</option>
                                <option value="1C">1C</option>
                                <option value="1D">1D</option>
                                <option value="1E">1E</option>
                            </optgroup>
                            <optgroup label="Tahun 2">
                                <option value="2A">2A</option>
                                <option value="2B">2B</option>
                                <option value="2C">2C</option>
                                <option value="2D">2D</option>
                                <option value="2E">2E</option>
                            </optgroup>
                            <!-- Add remaining years -->
                        </select>
                        <div id="class-error" class="error-message" role="alert"></div>
                    </div>

                    <!-- Reason Selection -->
                    <div class="form-field">
                        <label for="reason" class="form-label required">
                            Sebab Ketiadaan
                            <span class="sr-only">diperlukan</span>
                        </label>
                        <select id="reason" 
                                class="form-input"
                                required
                                aria-required="true"
                                aria-invalid="false"
                                aria-describedby="reason-error">
                            <option value="">Sila Pilih Sebab</option>
                            <option value="sakit">Sakit</option>
                            <option value="kursus">Kursus</option>
                            <option value="keluarga">Hal Keluarga</option>
                            <option value="kecemasan">Kecemasan</option>
                            <option value="kematian">Kematian Ahli Keluarga</option>
                            <option value="temujanji">Penjagaan Diri / Temujanji Keluarga</option>
                        </select>
                        <div id="reason-error" class="error-message" role="alert"></div>
                    </div>

                    <!-- Time Selection -->
                    <div class="form-field">
                        <label for="time" class="form-label required">
                            Masa
                            <span class="sr-only">diperlukan</span>
                        </label>
                        <select id="time" 
                                class="form-input"
                                required
                                aria-required="true"
                                aria-invalid="false"
                                aria-describedby="time-error">
                            <option value="">Sila Pilih Masa</option>
                            <option value="3:00-3:30">3:00 petang - 3:30 petang</option>
                            <option value="3:30-4:00">3:30 petang - 4:00 petang</option>
                            <option value="4:00-4:30">4:00 petang - 4:30 petang</option>
                            <option value="4:30-5:00">4:30 petang - 5:00 petang</option>
                            <option value="5:00-5:30">5:00 petang - 5:30 petang</option>
                            <option value="5:30-6:00">5:30 petang - 6:00 petang</option>
                        </select>
                        <div id="time-error" class="error-message" role="alert"></div>
                    </div>
                </div>

                <div class="flex justify-end">
                    <button type="submit" 
                            class="submit-button"
                            aria-label="Hantar borang guru pengganti">
                        Hantar
                    </button>
                </div>
            </form>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-white shadow-lg mt-8" role="contentinfo">
        <div class="container mx-auto px-4 py-6">
            <div class="text-center text-gray-600">
                <p id="current-datetime" class="mb-2" aria-live="polite"></p>
                <p>&copy; 2024 Sekolah Agama Rendah Rakyat Solathiah. Hak Cipta Terpelihara.</p>
            </div>
        </div>
    </footer>

    <script>
        // Update current date and time
        function updateDateTime() {
            const now = new Date();
            const options = {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: true
            };
            const dateTimeStr = now.toLocaleString('ms-MY', options);
            document.getElementById('current-datetime').textContent = `Tarikh dan Masa: ${dateTimeStr}`;
        }

        setInterval(updateDateTime, 1000);
        updateDateTime();

        // Enhanced form validation
        document.getElementById('relief-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Reset previous error states
            const errorElements = document.querySelectorAll('.error-message');
            errorElements.forEach(el => {
                el.textContent = '';
                el.previousElementSibling.classList.remove('error');
                el.previousElementSibling.setAttribute('aria-invalid', 'false');
            });
            
            // Hide previous status message
            const statusMessage = document.getElementById('status-message');
            statusMessage.classList.add('hidden');
            
            // Get form values
            const fields = {
                teacher: document.getElementById('teacher'),
                class: document.getElementById('class'),
                reason: document.getElementById('reason'),
                time: document.getElementById('time')
            };

            // Validation messages
            const messages = {
                teacher: 'Sila pilih guru',
                class: 'Sila pilih kelas',
                reason: 'Sila pilih sebab ketiadaan',
                time: 'Sila pilih masa'
            };

            let isValid = true;
            let firstInvalid = null;

            // Validate each field
            for (const [key, field] of Object.entries(fields)) {
                if (!field.value) {
                    const errorElement = document.getElementById(`${key}-error`);
                    errorElement.textContent = messages[key];
                    field.classList.add('error');
                    field.setAttribute('aria-invalid', 'true');
                    isValid = false;
                    if (!firstInvalid) firstInvalid = field;
                }
            }

            if (!isValid) {
                // Focus first invalid field
                firstInvalid.focus();
                
                // Show error status message
                statusMessage.textContent = 'Sila lengkapkan semua maklumat yang diperlukan.';
                statusMessage.classList.remove('hidden', 'success');
                statusMessage.classList.add('status-message', 'error');
                return;
            }

            // Show success message
            statusMessage.textContent = 'Maklumat guru pengganti telah berjaya dihantar!';
            statusMessage.classList.remove('hidden', 'error');
            statusMessage.classList.add('status-message', 'success');
            
            // Reset form
            this.reset();
            
            // Remove success message after 5 seconds
            setTimeout(() => {
                statusMessage.classList.add('hidden');
            }, 5000);
        });

        // Keyboard navigation improvements
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Tab') {
                document.body.classList.add('keyboard-user');
            }
        });

        document.addEventListener('mousedown', function() {
            document.body.classList.remove('keyboard-user');
        });
    </script>
</body>
</html>
